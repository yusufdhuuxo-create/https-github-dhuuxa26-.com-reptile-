{% extends "base.html" %}

{% block title %}Validate Code - CodeVault{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Validate Activation Code</h1>
    <p>Check and activate your code instantly</p>
</div>

<div class="grid grid-2">
    <div class="glass-card animate-in">
        <div class="card-header">
            <h2 class="card-title">
                <span class="card-title-icon icon-purple">ğŸ”‘</span>
                Enter Code
            </h2>
        </div>
        <form method="POST" id="validate-form">
            <div class="form-group">
                <label class="form-label" for="code">Activation Code</label>
                <input type="text" class="form-input mono" id="code" name="code" required 
                       placeholder="XXXX-XXXX-XXXX" 
                       style="font-size: 1.25rem; letter-spacing: 2px; text-align: center; padding: 1.25rem;"
                       value="{% if result %}{{ result.code }}{% endif %}">
                <p class="form-hint">Enter the code exactly as received</p>
            </div>
            
            <div class="form-group">
                <label class="form-label" for="user_name">Your Name (Optional)</label>
                <input type="text" class="form-input" id="user_name" name="user_name" placeholder="For tracking purposes">
            </div>
            
            <button type="submit" class="btn btn-success" style="width: 100%;">
                âœ“ Validate & Activate
            </button>
        </form>
    </div>
    
    <div class="glass-card animate-in" style="animation-delay: 0.1s;">
        <div class="card-header">
            <h2 class="card-title">
                <span class="card-title-icon icon-cyan">ğŸ“Š</span>
                Result
            </h2>
        </div>
        
        {% if result %}
            <div class="result-box {{ 'success' if result.valid else 'error' }}">
                <div class="result-icon">
                    {% if result.valid %}âœ“{% else %}âœ•{% endif %}
                </div>
                <h3 style="margin-bottom: 0.5rem; font-size: 1.5rem;">
                    {% if result.valid %}Code Activated!{% else %}Validation Failed{% endif %}
                </h3>
                <p style="color: var(--text-secondary);">{{ result.message }}</p>
                
                {% if result.valid and result.data %}
                    <div style="margin-top: 1.5rem; text-align: left; background: var(--bg-secondary); padding: 1.25rem; border-radius: 12px;">
                        <div style="display: grid; gap: 0.75rem;">
                            <div style="display: flex; justify-content: space-between;">
                                <span style="color: var(--text-muted);">Code</span>
                                <code class="mono" style="color: var(--primary-light);">{{ result.data.code }}</code>
                            </div>
                            {% if result.data.name %}
                            <div style="display: flex; justify-content: space-between;">
                                <span style="color: var(--text-muted);">Batch</span>
                                <span>{{ result.data.name }}</span>
                            </div>
                            {% endif %}
                            <div style="display: flex; justify-content: space-between;">
                                <span style="color: var(--text-muted);">Uses</span>
                                <span>{{ result.data.uses_count }} / {{ result.data.uses_allowed }}</span>
                            </div>
                            {% if result.data.expires_at %}
                            <div style="display: flex; justify-content: space-between;">
                                <span style="color: var(--text-muted);">Expires</span>
                                <span>{{ result.data.expires_at }}</span>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                {% endif %}
            </div>
        {% else %}
            <div class="empty-state">
                <div class="empty-state-icon">ğŸ”</div>
                <p>Enter a code to validate</p>
                <p style="font-size: 0.85rem; margin-top: 0.5rem; color: var(--text-muted);">Results will appear here</p>
            </div>
        {% endif %}
    </div>
</div>

<div class="glass-card animate-in" style="margin-top: 1.5rem; animation-delay: 0.2s;">
    <div class="card-header">
        <h2 class="card-title">
            <span class="card-title-icon icon-green">ğŸ’¡</span>
            How It Works
        </h2>
    </div>
    <div class="grid grid-4">
        <div style="text-align: center; padding: 1rem;">
            <div style="width: 48px; height: 48px; background: linear-gradient(135deg, var(--primary), var(--secondary)); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem; font-size: 1.25rem; color: white;">1</div>
            <h4 style="color: var(--text-primary); margin-bottom: 0.5rem;">Enter Code</h4>
            <p style="color: var(--text-secondary); font-size: 0.85rem;">Type or paste your activation code</p>
        </div>
        <div style="text-align: center; padding: 1rem;">
            <div style="width: 48px; height: 48px; background: linear-gradient(135deg, var(--primary), var(--secondary)); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem; font-size: 1.25rem; color: white;">2</div>
            <h4 style="color: var(--text-primary); margin-bottom: 0.5rem;">Validate</h4>
            <p style="color: var(--text-secondary); font-size: 0.85rem;">System checks validity and availability</p>
        </div>
        <div style="text-align: center; padding: 1rem;">
            <div style="width: 48px; height: 48px; background: linear-gradient(135deg, var(--primary), var(--secondary)); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem; font-size: 1.25rem; color: white;">3</div>
            <h4 style="color: var(--text-primary); margin-bottom: 0.5rem;">Activate</h4>
            <p style="color: var(--text-secondary); font-size: 0.85rem;">Valid codes are automatically activated</p>
        </div>
        <div style="text-align: center; padding: 1rem;">
            <div style="width: 48px; height: 48px; background: linear-gradient(135deg, var(--primary), var(--secondary)); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem; font-size: 1.25rem; color: white;">4</div>
            <h4 style="color: var(--text-primary); margin-bottom: 0.5rem;">Track</h4>
            <p style="color: var(--text-secondary); font-size: 0.85rem;">Each use is recorded with timestamp</p>
        </div>
    </div>
</div>
{% endblock %}
